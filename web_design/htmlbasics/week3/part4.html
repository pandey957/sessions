<html>
<head>
  <title>Matching Game</title>
  <style type="text/css">
    img {position:absolute;}
    div {width:500px; height:500px;position:absolute;}
    #rightSide {left: 500px; border-left: 1px solid black }

  </style>  
</head>
<body>
<p>Click on the extra smile face on the page</p>
<div id="leftSide"></div>
<div id="rightSide"></div>

<script>
  numberOfFaces = 5;
  height = 50;
  var theLeftSide = document.getElementById("leftSide");
  var theRightSide = document.getElementById("rightSide");
  var theBody = document.getElementsByTagName("body")[0]; 
  theBody.addEventListener('click',gameOver);
  
  function nextLevel(event){
    event.stopPropagation();
    numberOfFaces += 5;
    generateFaces();
  };

  function gameOver() {
    alert("Game Over!");
    theBody.removeEventListener('click',gameOver)
    theLeftSide.lastChild.removeEventListener('click',nextLevel);    
  }; 
  

  function generateFaces(){
    count = 0;    
    while(theLeftSide.hasChildNodes())
      {
        theLeftSide.removeChild(theLeftSide.lastChild);
      }
    if(theRightSide.firstChild)theRightSide.firstChild.parentNode.removeChild(theRightSide.firstChild);      
    while (count < numberOfFaces)
    {
      topLength = Math.floor((Math.random()*(500-height)));
      leftLength = Math.floor((Math.random()*(500-height)));
      img = document.createElement('img');
      img.src = "http://home.cse.ust.hk/~rossiter/mooc/matching_game/smile.png";
      img.style.height = height; img.style.width = height; img.style.top = topLength; img.style.left = leftLength;
      document.getElementById('leftSide').appendChild(img);
      count++;
    }
    theRightSide.appendChild(theLeftSide.cloneNode(true));
    lastRightChild = theRightSide.firstChild.lastChild;
    lastRightChild.parentNode.removeChild(lastRightChild);
    theLeftSide.lastChild.addEventListener('click',nextLevel);
  }; 
  window.addEventListener('load',generateFaces);  

</script>
</body>
<html>
